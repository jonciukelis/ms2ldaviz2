(this.webpackJsonpanother=this.webpackJsonpanother||[]).push([[0],{22:function(e,t,a){},68:function(e,t,a){e.exports=a(79)},73:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(30),l=a.n(r),s=(a(73),a(8)),c=a(9),i=a(11),u=a(10),m=a(12),h=(a(22),a(23),a(47)),d=a(37),p=a(25),f=a(56),b=a(36),g=a(21),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={given_link:"http://...",generated_link:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"generate_experiment_link",value:function(e){e=e.target.value;var t=encodeURIComponent(e),a=window.location.hostname+"?fetch_project="+t;this.setState({given_link:e,generated_link:a})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(g.a,null,o.a.createElement(g.a.Group,{controlId:"formForLink"},o.a.createElement(g.a.Label,null,"External Link Url"),o.a.createElement(g.a.Control,{placeholder:this.state.given_link,onChange:function(t){return e.generate_experiment_link(t)}}),o.a.createElement(g.a.Text,{className:"text-muted"},"Link to json file donwload hosted externally.")),o.a.createElement(g.a.Group,{controlId:"formForGLink"},o.a.createElement(g.a.Label,null,"Link for quick access"),o.a.createElement(g.a.Control,{value:this.state.generated_link,readOnly:!0}))))}}]),t}(o.a.Component),E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("p",null,"Developer: Domantas Jonas Sakalys"),o.a.createElement("p",null,"Original website could be found here: ",o.a.createElement("a",{href:"http://www.ms2lda.org"},"www.ms2lda.org")))}}]),t}(o.a.Component),v=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={loading:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,this.state.loading?o.a.createElement("p",null,"Loading, this takes a couple of seconds"):o.a.createElement("div",null,o.a.createElement("p",null,"Import a JSON of an LDA file."),o.a.createElement("p",null,"Please go to the Legacy option if you have a .dict file"),o.a.createElement("input",{type:"file",accept:".json",onChange:function(t){e.props.onChange(t),e.setState({loading:!0})}})))}}]),t}(o.a.Component),y=a(15),O=a(6),j=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={dockey:a.props.dockey,info:a.props.lda.doc_metadata[a.props.dockey],features:a.props.features,motifs:a.props.motifs,lda:a.props.lda},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(O.a,{body:!0},o.a.createElement(O.a.Header,null,"Info about the Doc: "),o.a.createElement(y.a,null,Object.keys(this.state.info).map((function(t){return o.a.createElement(y.a.Item,{key:t},o.a.createElement("span",null,t),o.a.createElement("input",{value:e.state.info[t],onChange:function(){}}))})))),o.a.createElement("br",null),o.a.createElement(O.a,{body:!0},o.a.createElement(O.a.Header,null,"Motifs assosiated with Doc"),o.a.createElement(y.a,null,this.state.motifs.map((function(t){return o.a.createElement(y.a.Item,{key:t,action:!0,onClick:function(){return e.props.showMotif(t)}},t)})))),o.a.createElement("br",null),o.a.createElement(O.a,{body:!0},o.a.createElement(O.a.Header,null,"Features in the Doc"),o.a.createElement(y.a,null,this.state.features.map((function(e){return o.a.createElement(y.a.Item,{key:e},e)})))))}}]),t}(o.a.Component),C=a(66),w=a(38),S=a(61);function D(e){var t=e.columns,a=e.data,n=e.onClick,r=Object(S.c)({columns:t,data:a,initialState:{pageIndex:0,pageSize:10}},S.b,S.a),l=r.getTableProps,s=r.getTableBodyProps,c=r.headerGroups,i=r.prepareRow,u=r.page,m=r.canPreviousPage,h=r.canNextPage,d=(r.pageOptions,r.pageCount),p=r.gotoPage,f=r.nextPage,b=r.previousPage,g=(r.setPageSize,r.state),k=g.pageIndex;g.pageSize;return o.a.createElement("div",{className:"table-container"},o.a.createElement(C.a,Object.assign({},l(),{striped:!0,bordered:!0,hover:!0,size:"sm"}),o.a.createElement("thead",null,c.map((function(e){return o.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map((function(e){return o.a.createElement("th",e.getHeaderProps(e.getSortByToggleProps()),e.render("Header"),o.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""))})))}))),o.a.createElement("tbody",s(),u.map((function(e,t){return i(e),o.a.createElement("tr",Object.assign({},e.getRowProps(),{onClick:function(){n(e.cells[0].value)}}),e.cells.map((function(e){return o.a.createElement("td",e.getCellProps(),o.a.createElement("p",{className:"table-cell"},e.render("Cell")))})))})))),o.a.createElement("div",{className:"pagination"},o.a.createElement(w.a,null,o.a.createElement(w.a.First,{onClick:function(){return p(0)},disabled:!m}),o.a.createElement(w.a.Prev,{onClick:function(){return b()},disabled:!m}),o.a.createElement("input",{value:String(k+1)+" ("+String(d)+") ",onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;p(t)},style:{width:"100px"}}),o.a.createElement(w.a.Next,{onClick:function(){return f()},disabled:!h}),o.a.createElement(w.a.Last,{onClick:function(){return p(d-1)},disabled:!h}))))}var x=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={motifkey:a.props.motifkey,info:a.props.lda.topic_metadata[a.props.motifkey],features:a.props.features,docs:a.props.docs,lda:a.props.lda,options:a.props.options},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(O.a,{body:!0},o.a.createElement(O.a.Header,null,"Info about the Motif: "),o.a.createElement(y.a,null,Object.keys(this.state.info).map((function(t){return o.a.createElement(y.a.Item,{key:t},o.a.createElement("span",null,t),o.a.createElement("input",{value:e.state.info[t],onChange:function(){}}))})))),o.a.createElement("br",null),o.a.createElement(O.a,{body:!0},o.a.createElement(O.a.Header,null,"Docs assosiated with Motif"),o.a.createElement(y.a,null,this.state.docs.map((function(t){return o.a.createElement(y.a.Item,{key:t,action:!0,onClick:function(){return e.props.showDoc(t)}},t)})))),o.a.createElement("br",null),o.a.createElement(O.a,{body:!0},o.a.createElement(O.a.Header,null,"Features assosiated with Motif"),o.a.createElement(y.a,null,this.state.features.map((function(e){return o.a.createElement(y.a.Item,{key:e},e)})))))}}]),t}(o.a.Component),N=a(60),L=a(34),M=a(52),_=a.n(M),I=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onChangeDebounced=function(e){a.state.searchtemp===e&&a.setState({search:a.state.searchtemp})};for(var n={},o=0,r=Object.keys(e.lda.doc_metadata);o<r.length;o++){var l=r[o];n[l]=JSON.stringify(e.lda.doc_metadata[l])}var c=[];c.push({Header:"Name",accessor:"name"});for(var m=0,h=Object.keys(e.lda.doc_metadata[Object.keys(e.lda.doc_metadata)[0]]);m<h.length;m++){var d=h[m];e.options.docs[d]&&(c.push({Header:d,accessor:d}),console.log(e.options.docs[d]))}return a.state={search:"",searchtemp:"",columns:c,searchData:n,lda:e.lda},a.onChangeDebounced=_()(a.onChangeDebounced,500),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.searchtemp===t.searchtemp}},{key:"searchFilter",value:function(e){this.setState({searchtemp:e.target.value}),this.onChangeDebounced(e.target.value)}},{key:"render",value:function(){for(var e=this,t=[],a=0,n=Object.keys(this.state.searchData);a<n.length;a++){var r=n[a];this.state.searchData[r].includes(this.state.searchtemp)&&t.push(Object(N.a)({name:r},this.state.lda.doc_metadata[r]))}return o.a.createElement(O.a,{body:!0,className:"mx-auto"},o.a.createElement(O.a.Header,null,o.a.createElement("h1",null,"Showing Docs"),o.a.createElement(L.a,{onChange:function(t){return e.searchFilter(t)},type:"text",placeholder:"Search",className:"mr-sm-2"})),o.a.createElement(D,{data:t,columns:this.state.columns,onClick:function(t){e.props.showDoc(t)}}))}}]),t}(o.a.Component),H=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onChangeDebounced=function(e){a.state.searchtemp===e&&a.setState({search:a.state.searchtemp})};for(var n={},o=0,r=Object.keys(e.lda.topic_metadata);o<r.length;o++){var l=r[o];n[l]=JSON.stringify(e.lda.topic_metadata[l])}var c=[];c.push({Header:"Key",accessor:"key"});for(var m=0,h=Object.keys(e.lda.topic_metadata[Object.keys(e.lda.topic_metadata)[0]]);m<h.length;m++){var d=h[m];e.options.motifs[d]&&c.push({Header:d,accessor:d})}return a.state={search:"",searchtemp:"",columns:c,searchData:n,lda:e.lda},a.onChangeDebounced=_()(a.onChangeDebounced,500),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.searchtemp===t.searchtemp}},{key:"searchFilter",value:function(e){this.setState({searchtemp:e.target.value}),this.onChangeDebounced(e.target.value)}},{key:"render",value:function(){for(var e=this,t=[],a=0,n=Object.keys(this.state.searchData);a<n.length;a++){var r=n[a];this.state.searchData[r].includes(this.state.searchtemp)&&t.push(Object(N.a)({key:r},this.state.lda.topic_metadata[r]))}return o.a.createElement(O.a,{body:!0,className:"mx-auto"},o.a.createElement(O.a.Header,null,o.a.createElement("h1",null,"Showing Motifs"),o.a.createElement(L.a,{onChange:function(t){return e.searchFilter(t)},type:"text",placeholder:"Search",className:"mr-sm-2"})),o.a.createElement(D,{data:t,columns:this.state.columns,onClick:function(t){e.props.showMotif(t)}}))}}]),t}(o.a.Component),P=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("header",{className:"vertical-center d-flex justify-content-center"},o.a.createElement("h1",null,"Import a file to get started!"))}}]),t}(o.a.Component),J=a(41),T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={motifs:e.options.motifs,docs:e.options.docs,thresholds:e.options.thresholds},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"docsChange",value:function(e,t,a){var n=this.state.docs;n[t]=e.target.checked,this.setState({docs:n})}},{key:"motifsChange",value:function(e,t,a){var n=this.state.motifs;n[t]=e.target.checked,this.setState({motifs:n})}},{key:"thresholdsChange",value:function(e,t){var a=this.state.thresholds;a[t]=e.target.value,this.setState({thresholds:a})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(O.a,{body:!0},o.a.createElement(O.a.Header,null,"Docs View options"),o.a.createElement(J.a,null,Object.keys(this.state.docs).map((function(t){return o.a.createElement(g.a.Check,{type:"checkbox",id:"default-checkbox",key:t,label:t,checked:e.state.docs[t],onChange:function(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;e.docsChange(a,n)}})})))),o.a.createElement("br",null),o.a.createElement(O.a,{body:!0},o.a.createElement(O.a.Header,null,"Motif View options"),o.a.createElement(J.a,null,Object.keys(this.state.motifs).map((function(t){return o.a.createElement(g.a.Check,{type:"checkbox",id:"default-checkbox",key:t,label:t,checked:e.state.motifs[t],onChange:function(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;e.motifsChange(a,n)}})})))),o.a.createElement("br",null),o.a.createElement(O.a,{body:!0},o.a.createElement(O.a.Header,null,"Thresholds"),o.a.createElement(y.a,null,Object.keys(this.state.thresholds).map((function(t){return o.a.createElement(y.a.Item,{key:t},o.a.createElement("span",null,t),o.a.createElement("input",{value:e.state.thresholds[t],onChange:function(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;e.thresholdsChange(a,n)}}))})))))}}]),t}(o.a.Component),F=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={modal:!1,modalName:"",modalBody:"",imported:!1,about:!1,import:!1,legacy:!1,showdoc:!1,showmotif:!1,showgenerate:!1,bydocs:!1,bymotifs:!1,dockey:"",motifkey:"",lda:{},features:[],motifs:[],docs:[],showOptions:!1,options:{docs:[],motifs:[],thresholds:[]}};var n=window.location.href,o=new URL(n),r=decodeURIComponent(o.searchParams.get("fetch_project"));return r&&(a.linkToState(r),console.log(r)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"CenterModal",value:function(e){return o.a.createElement(b.a,Object.assign({},e,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),o.a.createElement(b.a.Header,{closeButton:!0},o.a.createElement(b.a.Title,{id:"contained-modal-title-vcenter"},e.title)),o.a.createElement(b.a.Body,null,e.children),o.a.createElement(b.a.Footer,null,o.a.createElement(f.a,{onClick:e.onHide},"Close")))}},{key:"setModalShow",value:function(e){!1===e?(this.state.showOptions,this.setState({modalName:"",about:!1,import:!1,legacy:!1,showOptions:!1,modal:!1,showdoc:!1,showmotif:!1,showgenerate:!1})):this.setState({modal:!0})}},{key:"linkModal",value:function(){console.log("link1"),this.setState({modalName:o.a.createElement("h1",null,"Generate a sharable link"),modal:!0,showgenerate:!0})}},{key:"importJSON",value:function(){console.log("import1"),this.setState({modal:!0,modalName:"Import",import:!0})}},{key:"aboutModal",value:function(){console.log("about1"),this.setState({modalName:o.a.createElement("h1",null,"About"),modal:!0,about:!0})}},{key:"optionsModal",value:function(){console.log("options1"),this.setState({modalName:o.a.createElement("h1",null,"Options"),modal:!0,showOptions:!0})}},{key:"optionChange",value:function(e){this.setState({options:e})}},{key:"showDoc",value:function(e){console.log("showdoc: "+e);for(var t=[],a=[],n=0,r=Object.keys(this.state.lda.phi[e]);n<r.length;n++){var l=r[n];t.push(l)}for(var s=0,c=Object.keys(this.state.lda.phi[e]);s<c.length;s++)for(var i=c[s],u=0,m=Object.keys(this.state.lda.phi[e][i]);u<m.length;u++){var h=m[u];a.includes(h)||a.push(h)}this.setState({modal:!0,modalName:o.a.createElement("h1",null,"Docs page of ",e),showdoc:!0,showmotif:!1,features:t,motifs:a,dockey:e})}},{key:"showMotif",value:function(e){console.log("showmotif: "+e);for(var t=[],a=[],n=0,r=Object.keys(this.state.lda.beta[e]);n<r.length;n++){var l=r[n];t.push(l)}for(var s=0,c=Object.keys(this.state.lda.theta);s<c.length;s++)for(var i=c[s],u=0,m=Object.keys(this.state.lda.theta[i]);u<m.length;u++){m[u]===e&&(a.includes(i)||a.push(i))}this.setState({modal:!0,modalName:o.a.createElement("h1",null,"Motif page of ",e),showmotif:!0,showdoc:!1,features:t,motifs:[],docs:a,motifkey:e})}},{key:"exportJSON",value:function(){console.log("export1");var e=document.createElement("A");e.href=URL.createObjectURL(new Blob([JSON.stringify(this.state.lda)])),e.download="exportedLDA.json",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},{key:"example",value:function(e){1===e?this.linkToState("../example/"):this.linkToState("../example2/")}},{key:"linkToState",value:function(e){var t=this;fetch(e,{mode:"no-cors"}).then((function(e){return e.text()})).then((function(e){t.setState({lda:JSON.parse(e),imported:!0,bydocs:!0,loading:!1})})).catch((function(e){return console.error(e)}))}},{key:"discardLDA",value:function(){console.log("discard"),this.setState({bymotifs:!1,bydocs:!1,imported:!1,lda:""})}},{key:"fileJSON",value:function(e){var t=this,a=e.target.files[0],n=new FileReader;n.onload=function(e){for(var a=JSON.parse(e.target.result),n={docs:[],motifs:[],thresholds:{overlap:0,propability:0}},o=0,r=Object.keys(a.doc_metadata[Object.keys(a.doc_metadata)[0]]);o<r.length;o++){var l=r[o];n.docs[l]=!0}for(var s=0,c=Object.keys(a.topic_metadata[Object.keys(a.topic_metadata)[0]]);s<c.length;s++){var i=c[s];n.motifs[i]=!0}t.setState({lda:a,options:n,imported:!0,bydocs:!0,loading:!1}),t.setModalShow(!1)},n.readAsText(a)}},{key:"byToggle",value:function(e){this.setState({bydocs:e,bymotifs:!e})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"MS2LDAviz2"},o.a.createElement(h.a,{fixed:"top",bg:"light",expand:"lg"},o.a.createElement(h.a.Brand,{href:"#home"},"MS2LDAviz2"),o.a.createElement(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),o.a.createElement(h.a.Collapse,{id:"basic-navbar-nav"},o.a.createElement(p.a,{className:"mr-auto"},this.state.imported?o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a.Link,{onClick:function(){return e.exportJSON()}},"Export"),o.a.createElement(d.a,{title:"Explore LDA",id:"basic-nav-dropdown"},o.a.createElement(d.a.Item,{onClick:function(){return e.byToggle(!0)}},"By Docs"),o.a.createElement(d.a.Item,{onClick:function(){return e.byToggle(!1)}},"By Mass2Motifs"),o.a.createElement(d.a.Divider,null),o.a.createElement(d.a.Item,null,"Store In-Browser")),o.a.createElement(p.a.Link,{onClick:function(){return e.discardLDA()}},"Discard"),o.a.createElement(p.a.Link,{onClick:function(){return e.optionsModal()}},"Options")):o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a.Link,{onClick:function(){return e.importJSON()}},"Import"),o.a.createElement(p.a.Link,{target:"_blank",href:"../legacy/"},"Legacy"))),o.a.createElement(p.a.Link,{onClick:function(){return e.linkModal()}},"Share"),o.a.createElement(p.a.Link,{onClick:function(){return e.example(1)}},"Example"),o.a.createElement(p.a.Link,{onClick:function(){return e.example(2)}},"Example2"),o.a.createElement(p.a.Link,{onClick:function(){return e.aboutModal()}},"About"))),this.state.imported?null:o.a.createElement(P,null),this.state.imported&&this.state.bydocs?o.a.createElement(I,{options:this.state.options,lda:this.state.lda,showDoc:function(t){return e.showDoc(t)}}):null,this.state.imported&&this.state.bymotifs?o.a.createElement(H,{options:this.state.options,lda:this.state.lda,showMotif:function(t){return e.showMotif(t)}}):null,o.a.createElement(this.CenterModal,{show:this.state.modal,onHide:function(){return e.setModalShow(!1)},title:this.state.modalName},this.state.showgenerate?o.a.createElement(k,null):null,this.state.about?o.a.createElement(E,null):null,this.state.import?o.a.createElement(v,{onChange:function(t){return e.fileJSON(t)}}):null,this.state.showOptions?o.a.createElement(T,{options:this.state.options,optionChange:function(t){return e.optionChange(t)}}):null,this.state.showdoc?o.a.createElement(j,{lda:this.state.lda,options:this.state.options,dockey:this.state.dockey,features:this.state.features,motifs:this.state.motifs,showMotif:function(t){return e.showMotif(t)}}):null,this.state.showmotif?o.a.createElement(x,{lda:this.state.lda,options:this.state.options,motifkey:this.state.motifkey,features:this.state.features,docs:this.state.docs,showDoc:function(t){return e.showDoc(t)}}):null))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[68,1,2]]]);
//# sourceMappingURL=main.6866dc12.chunk.js.map