(this.webpackJsonpanother=this.webpackJsonpanother||[]).push([[0],{103:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(37),s=a.n(r),l=(a(93),a(8)),c=a(9),i=a(10),u=a(11),h=(a(23),a(28),a(60)),m=a(59),d=a(31),f=a(45),p=a(50),b=a(13),y=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={given_link:"http://...",generated_link:""},n}return Object(c.a)(a,[{key:"generate_experiment_link",value:function(e){e=e.target.value;var t=encodeURIComponent(e),a=window.location.href+"?fetch_project="+t;this.setState({given_link:e,generated_link:a})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(b.a,null,o.a.createElement(b.a.Group,{controlId:"formForLink"},o.a.createElement(b.a.Label,null,"External Link Url"),o.a.createElement(b.a.Control,{placeholder:this.state.given_link,onChange:function(t){return e.generate_experiment_link(t)}}),o.a.createElement(b.a.Text,{className:"text-muted"},"Link to json file donwload hosted externally.")),o.a.createElement(b.a.Group,{controlId:"formForGLink"},o.a.createElement(b.a.Label,null,"Link for quick access"),o.a.createElement(b.a.Control,{value:this.state.generated_link,readOnly:!0}))))}}]),a}(o.a.Component),v=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("p",null,"Developer: Domantas Jonas Sakalys"),o.a.createElement("p",null,"Original website could be found here: ",o.a.createElement("a",{href:"http://www.ms2lda.org"},"www.ms2lda.org")))}}]),a}(o.a.Component),g=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={loading:n.props.loading},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,this.state.loading?o.a.createElement("p",null,"Loading, this takes a couple of seconds"):o.a.createElement("div",null,o.a.createElement("p",null,"Import a JSON of an LDA file."),o.a.createElement("p",null,"Please go to the Legacy option if you have a .dict file"),o.a.createElement("input",{type:"file",accept:".json",onChange:function(t){e.props.onChange(t),e.setState({loading:!0})}})))}}]),a}(o.a.Component),k=a(19),E=a(7),O=a(39),j=a(47),C=a(83),w=a(51),S=a(77);function N(e){var t=e.columns,a=e.data,n=e.onClick,r=Object(S.useTable)({columns:t,data:a,initialState:{pageIndex:0,pageSize:10}},S.useSortBy,S.usePagination),s=r.getTableProps,l=r.getTableBodyProps,c=r.headerGroups,i=r.prepareRow,u=r.page,h=r.canPreviousPage,m=r.canNextPage,d=(r.pageOptions,r.pageCount),f=r.gotoPage,p=r.nextPage,b=r.previousPage,y=(r.setPageSize,r.state),v=y.pageIndex;y.pageSize;return o.a.createElement("div",{className:"table-container"},o.a.createElement(C.a,Object.assign({},s(),{striped:!0,bordered:!0,hover:!0,size:"sm"}),o.a.createElement("thead",null,c.map((function(e){return o.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map((function(e){return o.a.createElement("th",e.getHeaderProps(e.getSortByToggleProps()),e.render("Header"),o.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""))})))}))),o.a.createElement("tbody",l(),u.map((function(e,t){return i(e),o.a.createElement("tr",Object.assign({},e.getRowProps(),{onClick:function(){n(e.cells[0].value)}}),e.cells.map((function(e){return o.a.createElement("td",e.getCellProps(),o.a.createElement("p",{className:"table-cell"},e.render("Cell")))})))})))),o.a.createElement("div",{className:"pagination"},o.a.createElement(w.a,null,o.a.createElement(w.a.First,{onClick:function(){return f(0)},disabled:!h}),o.a.createElement(w.a.Prev,{onClick:function(){return b()},disabled:!h}),o.a.createElement("input",{value:String(v+1)+" ("+String(d)+") ",onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;f(t)},style:{width:"100px"}}),o.a.createElement(w.a.Next,{onClick:function(){return p()},disabled:!m}),o.a.createElement(w.a.Last,{onClick:function(){return f(d-1)},disabled:!m}))))}var x=a(80),D=a(62),_=a.n(D),M=a(63),L=a.n(M),H=_()(L.a),I=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;Object(l.a)(this,a),n=t.call(this,e);var o,r=[],s=[],c=[],i=[],u=Object(x.a)(e.data.peaks);try{for(u.s();!(o=u.n()).done;){var h=o.value;r.push(h[0]),s.push(h[1])}}catch(p){u.e(p)}finally{u.f()}var m,d=Object(x.a)(e.data.losses);try{for(d.s();!(m=d.n()).done;){var f=m.value;c.push(f[0]),i.push(f[1])}}catch(p){d.e(p)}finally{d.f()}return n.state={featureNames:r,featureValues:s,lossNames:c,lossValues:i},n}return Object(c.a)(a,[{key:"render",value:function(){var e=[{type:"bar",x:this.state.featureNames,y:this.state.featureValues,name:"features"},{type:"bar",x:this.state.lossNames,y:this.state.lossValues,name:"losses"}];return o.a.createElement(H,{className:"Chart",data:e,layout:{title:"Mass Spectrometry Plot",xaxis:{title:"m/z"},yaxis:{title:"Intensity"}},config:{showLink:!1,displayModeBar:!0}})}}]),a}(o.a.Component),P=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;Object(l.a)(this,a),n=t.call(this,e);for(var o=e.dockey,r=e.lda,s=[],c=[{Header:"Key",accessor:"key"},{Header:"Intensity",accessor:function(e){return Number(e.inten)},sortMethod:function(e,t){return Number(e)-Number(t)}}],i=0,u=Object.keys(r.corpus[o]);i<u.length;i++){var h=u[i];s.push({key:h,inten:r.corpus[o][h]})}for(var m=[],d=[{Header:"Key",accessor:"key"},{Header:"Probability",accessor:function(e){return Number(e.prob).toFixed(5)},sortMethod:function(e,t){return Number(e)-Number(t)}},{Header:"Overlap",accessor:function(e){return Number(e.over).toFixed(7)},sortMethod:function(e,t){return Number(e)-Number(t)}}],f=0,p=Object.keys(r.theta[o]);f<p.length;f++){var b=p[f];r.theta[o][b]>e.options.thresholds.probability&&r.overlap_scores[o][b]>e.options.thresholds.overlap&&m.push({key:b,prob:r.theta[o][b],over:r.overlap_scores[o][b]})}for(var y={peaks:[],losses:[]},v={peaks:[],losses:[]},g=0,k=Object.keys(r.corpus[o]);g<k.length;g++){var E=k[g];E.includes("fragment")?y.peaks.push([Number(E.split("_")[1]),r.corpus[o][E]]):v.losses.push([Number(E.split("_")[1]),r.corpus[o][E]])}var O=!1,j=!1;return 0!==y.peaks.length&&(O=!0),0!==v.losses.length&&(j=!0),console.log(y),n.state={fragments:O,losses:j,chartData:y,chart2Data:v,dockey:o,info:r.doc_metadata[o],features:s,motifs:m,featuresc:c,motifsc:d,lda:r},n}return Object(c.a)(a,[{key:"infoChange",value:function(e,t){var a=this.state.info;a[t]=e.target.value,this.setState({info:a})}},{key:"isReadOnly",value:function(e){return!!["parentmass"].includes(e)}},{key:"william",value:function(e){var t=window.open("/mass_spec_project/index.html","Popup","toolbar=no,scrollbars=no,location=no,statusbar=no,menubar=no,resizable=0,width=1400,height=850,left = 0,top = 0");t.addEventListener("load",(function(){t.peakArray=[],setTimeout((function(){t.clearPlot(),setTimeout((function(){t.getData(e)}),500)}),500)}),!1)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(E.a,{body:!0},o.a.createElement(f.a,{onClick:function(){e.william(e.state.chartData)}},"Link to mass_spec")),o.a.createElement("br",null),this.state.fragments?o.a.createElement(E.a,{body:!0},o.a.createElement(E.a.Header,null,"Fragments in Doc"),o.a.createElement(I,{data:this.state.chartData})):null,o.a.createElement("br",null),this.state.losses?o.a.createElement(E.a,{body:!0},o.a.createElement(E.a.Header,null,"Losses in Doc"),o.a.createElement(I,{data:this.state.chart2Data})):null,o.a.createElement("br",null),o.a.createElement(E.a,{body:!0},o.a.createElement(E.a.Header,null,"Info about the Doc: "),o.a.createElement(k.a,null,Object.keys(this.state.info).map((function(t){return o.a.createElement(k.a.Item,null,o.a.createElement(b.a.Group,{as:j.a,key:t},o.a.createElement(b.a.Label,{column:!0,sm:"4"},t),o.a.createElement(O.a,{sm:"5"},o.a.createElement(b.a.Control,{value:null===e.state.info[t]?"":e.state.info[t],readOnly:e.isReadOnly(t),onChange:function(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;e.infoChange(a,n)}}))))})))),o.a.createElement("br",null),o.a.createElement(E.a,{body:!0},o.a.createElement(E.a.Header,null,"Motifs assosiated with Doc"),o.a.createElement(k.a,null,o.a.createElement(N,{data:this.state.motifs,columns:this.state.motifsc,onClick:function(t){e.props.showMotif(t)}}))),o.a.createElement("br",null),o.a.createElement(E.a,{body:!0},o.a.createElement(E.a.Header,null,"Features in the Doc"),o.a.createElement(k.a,null,o.a.createElement(N,{data:this.state.features,columns:this.state.featuresc,onClick:function(){}}))))}}]),a}(o.a.Component),F=_()(L.a),T=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;Object(l.a)(this,a),n=t.call(this,e);for(var o=[],r=[],s=[],c=[],i=0,u=Object.keys(e.data);i<u.length;i++){var h=u[i];o.push(h),r.push(e.data[h][0]),s.push(e.data[h][1]),c.push(e.data[h][2])}return n.state={frag:o,inst:r,intenM:s,intenD:c},n}return Object(c.a)(a,[{key:"render",value:function(){var e=[{type:"bar",x:this.state.frag,y:this.state.inst,name:"Instances in Motif Docs",marker:{opacity:.7}},{type:"bar",x:this.state.frag,y:this.state.intenD,name:"Total Intensity",yaxis:"y2",marker:{opacity:.5}},{type:"bar",x:this.state.frag,y:this.state.intenM,name:"Motif Intensity",yaxis:"y2",marker:{opacity:.5}}];return o.a.createElement(F,{className:"Chart",data:e,layout:{title:"Feature Counts",xaxis:{title:"feature"},yaxis:{title:"instances"},yaxis2:{title:"intensity",overlaying:"y",side:"right"}},config:{showLink:!1,displayModeBar:!0}})}}]),a}(o.a.Component),J=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;Object(l.a)(this,a),n=t.call(this,e);for(var o=e.motifkey,r=e.lda,s=[],c=[{Header:"Key",accessor:"key"},{Header:"Probability",accessor:function(e){return Number(e.prob).toFixed(5)},sortMethod:function(e,t){return Number(e)-Number(t)}}],i=0,u=Object.keys(r.beta[o]);i<u.length;i++){var h=u[i];s.push({key:h,prob:r.beta[o][h]})}for(var m=[],d=[{Header:"Key",accessor:"key"},{Header:"Probability",accessor:function(e){return Number(e.prob).toFixed(5)},sortMethod:function(e,t){return Number(e)-Number(t)}},{Header:"Overlap",accessor:function(e){return Number(e.over).toFixed(7)},sortMethod:function(e,t){return Number(e)-Number(t)}}],f={},p=0,b=Object.keys(r.theta);p<b.length;p++)for(var y=b[p],v=0,g=Object.keys(r.theta[y]);v<g.length;v++){var k=g[v];if(k===o){for(var E=0,O=Object.keys(r.phi[y]);E<O.length;E++){var j=O[E];try{f[j]=[f[j][0]+1,f[j][1]+r.corpus[y][j]]}catch(T){f[j]=[1,r.corpus[y][j]]}}m.includes(y)||r.overlap_scores[y][k]>e.options.thresholds.overlap&&r.theta[y][k]>e.options.thresholds.probability&&m.push({key:y,prob:r.theta[y][k],over:r.overlap_scores[y][k]})}}for(var C={},w=0,S=Object.keys(r.word_index);w<S.length;w++){C[S[w]]=0}for(var N=0,x=Object.keys(r.phi);N<x.length;N++)for(var D=x[N],_=0,M=Object.keys(r.corpus[D]);_<M.length;_++){var L=M[_];C[L]=C[L]+r.corpus[D][L]}console.log(f);for(var H={},I=0,P=Object.keys(r.beta[o]);I<P.length;I++){var F=P[I];try{r.beta[o][F]>e.options.thresholds.feature_probability&&(H[F]=[f[F][0],f[F][1],C[F]])}catch(J){console.log(F)}}return console.log(H),n.state={chartData:H,fragments:!0,motifkey:o,info:r.topic_metadata[o],features:s,featuresc:c,docs:m,docsc:d,lda:r,options:n.props.options},n}return Object(c.a)(a,[{key:"infoChange",value:function(e,t){var a=this.state.info;a[t]=e.target.value,this.setState({info:a})}},{key:"isReadOnly",value:function(e){return!![].includes(e)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,this.state.fragments?o.a.createElement(E.a,{body:!0},o.a.createElement(E.a.Header,null,"Fragments in Motif"),o.a.createElement(T,{data:this.state.chartData})):null,o.a.createElement(E.a,{body:!0},o.a.createElement(E.a.Header,null,"Info about the Motif: "),o.a.createElement(k.a,null,Object.keys(this.state.info).map((function(t){return o.a.createElement(k.a.Item,null,o.a.createElement(b.a.Group,{as:j.a,key:t},o.a.createElement(b.a.Label,{column:!0,sm:"4"},t),o.a.createElement(O.a,{sm:"5"},o.a.createElement(b.a.Control,{value:null===e.state.info[t]?"":e.state.info[t],readOnly:e.isReadOnly(t),onChange:function(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;e.infoChange(a,n)}}))))})))),o.a.createElement("br",null),o.a.createElement(E.a,{body:!0},o.a.createElement(E.a.Header,null,"Docs assosiated with Motif"),o.a.createElement(k.a,null,o.a.createElement(N,{data:this.state.docs,columns:this.state.docsc,onClick:function(t){e.props.showDoc(t)}}))),o.a.createElement("br",null),o.a.createElement(E.a,{body:!0},o.a.createElement(E.a.Header,null,"Features assosiated with Motif"),o.a.createElement(k.a,null,o.a.createElement(N,{data:this.state.features,columns:this.state.featuresc,onClick:function(){}}))))}}]),a}(o.a.Component),B=a(75),A=a(43),R=a(67),z=a.n(R),G=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).onChangeDebounced=function(e){n.state.searchtemp===e&&n.setState({search:n.state.searchtemp})};for(var o={},r=0,s=Object.keys(e.lda.doc_metadata);r<s.length;r++){var c=s[r];o[c]=JSON.stringify(e.lda.doc_metadata[c])}return n.state={search:"",searchtemp:"",searchData:o,lda:e.lda,options:e.options},n.onChangeDebounced=z()(n.onChangeDebounced,500),n}return Object(c.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.searchtemp===t.searchtemp}},{key:"searchFilter",value:function(e){this.setState({searchtemp:e.target.value}),this.onChangeDebounced(e.target.value)}},{key:"render",value:function(){var e=this,t=[];t.push({Header:"Name",accessor:"name"});for(var a=0,n=Object.keys(this.state.lda.doc_metadata[Object.keys(this.state.lda.doc_metadata)[0]]);a<n.length;a++){var r=n[a];this.state.options.docs[r]&&t.push({Header:r,accessor:r})}for(var s=[],l=0,c=Object.keys(this.state.searchData);l<c.length;l++){var i=c[l];this.state.searchData[i].includes(this.state.searchtemp)&&s.push(Object(B.a)({name:i},this.state.lda.doc_metadata[i]))}return o.a.createElement(E.a,{body:!0,className:"mx-auto"},o.a.createElement(E.a.Header,null,o.a.createElement("h1",null,"Showing Docs"),o.a.createElement(A.a,{onChange:function(t){return e.searchFilter(t)},type:"text",placeholder:"Search",className:"mr-sm-2"})),o.a.createElement(N,{data:s,columns:t,onClick:function(t){e.props.showDoc(t)}}))}}]),a}(o.a.Component),U=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).onChangeDebounced=function(e){n.state.searchtemp===e&&n.setState({search:n.state.searchtemp})};for(var o={},r=0,s=Object.keys(e.lda.topic_metadata);r<s.length;r++){var c=s[r];o[c]=JSON.stringify(e.lda.topic_metadata[c])}return n.state={search:"",searchtemp:"",searchData:o,lda:e.lda,options:e.options},n.onChangeDebounced=z()(n.onChangeDebounced,500),n}return Object(c.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.searchtemp===t.searchtemp}},{key:"searchFilter",value:function(e){this.setState({searchtemp:e.target.value}),this.onChangeDebounced(e.target.value)}},{key:"render",value:function(){var e=this,t=[];t.push({Header:"Key",accessor:"key"}),t.push({Header:"Degree",accessor:"degree"});for(var a=0,n=Object.keys(this.state.lda.topic_metadata[Object.keys(this.state.lda.topic_metadata)[0]]);a<n.length;a++){var r=n[a];this.state.options.motifs[r]&&t.push({Header:r,accessor:r})}for(var s=[],l=0,c=Object.keys(this.state.searchData);l<c.length;l++){var i=c[l];if(this.state.searchData[i].includes(this.state.searchtemp)){for(var u=[],h=0,m=0,d=Object.keys(this.state.lda.theta);m<d.length;m++)for(var f=d[m],p=0,b=Object.keys(this.state.lda.theta[f]);p<b.length;p++){var y=b[p];y===i&&(u.includes(f)||this.state.lda.overlap_scores[f][y]>this.state.options.thresholds.overlap&&this.state.lda.theta[f][y]>this.state.options.thresholds.probability&&(h+=1,u.push(f)))}s.push(Object(B.a)({key:i,degree:h},this.state.lda.topic_metadata[i]))}}return o.a.createElement(E.a,{body:!0,className:"mx-auto"},o.a.createElement(E.a.Header,null,o.a.createElement("h1",null,"Showing Motifs"),o.a.createElement(A.a,{onChange:function(t){return e.searchFilter(t)},type:"text",placeholder:"Search",className:"mr-sm-2"})),o.a.createElement(N,{data:s,columns:t,onClick:function(t){e.props.showMotif(t)}}))}}]),a}(o.a.Component),V=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("header",{className:"vertical-center d-flex justify-content-center"},o.a.createElement("h1",null,"Import a file or press Example to get started!"))}}]),a}(o.a.Component),K=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={motifs:e.options.motifs,docs:e.options.docs,thresholds:e.options.thresholds},n}return Object(c.a)(a,[{key:"docsChange",value:function(e,t,a){var n=this.state.docs;n[t]=e.target.checked,this.setState({docs:n})}},{key:"motifsChange",value:function(e,t,a){var n=this.state.motifs;n[t]=e.target.checked,this.setState({motifs:n})}},{key:"thresholdsChange",value:function(e,t){var a=this.state.thresholds;a[t]=e.target.value,this.setState({thresholds:a})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(E.a,{body:!0},o.a.createElement(E.a.Header,null,"Docs View options"),o.a.createElement(k.a,null,Object.keys(this.state.docs).map((function(t){return o.a.createElement(k.a.Item,null,o.a.createElement(b.a.Check,{type:"checkbox",id:"default-checkbox",key:t,label:t,checked:e.state.docs[t],onChange:function(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;e.docsChange(a,n)}}))})))),o.a.createElement("br",null),o.a.createElement(E.a,{body:!0},o.a.createElement(E.a.Header,null,"Motif View options"),o.a.createElement(k.a,null,Object.keys(this.state.motifs).map((function(t){return o.a.createElement(k.a.Item,null,o.a.createElement(b.a.Check,{type:"checkbox",id:"default-checkbox",key:t,label:t,checked:e.state.motifs[t],onChange:function(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;e.motifsChange(a,n)}}))})))),o.a.createElement("br",null),o.a.createElement(E.a,{body:!0},o.a.createElement(E.a.Header,null,"Thresholds"),o.a.createElement(k.a,null,Object.keys(this.state.thresholds).map((function(t){return o.a.createElement(k.a.Item,null,o.a.createElement(b.a.Group,{as:j.a,key:t},o.a.createElement(b.a.Label,{column:!0,sm:"4"},t),o.a.createElement(O.a,{sm:"5"},o.a.createElement(b.a.Control,{value:e.state.thresholds[t],onChange:function(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;e.thresholdsChange(a,n)}}))))})))))}}]),a}(o.a.Component),W=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).state={modal:!1,modalName:"",modalBody:"",loading:!1,imported:!1,about:!1,import:!1,legacy:!1,showdoc:!1,showmotif:!1,showgenerate:!1,bydocs:!1,bymotifs:!1,dockey:"",motifkey:"",lda:{},features:[],motifs:[],docs:[],showOptions:!1,options:{docs:[],motifs:[],thresholds:[]}};var o=window.location.href,r=new URL(o),s=decodeURIComponent(r.searchParams.get("fetch_project"));return s&&(n.linkToState(s),n.setState({modal:!0,import:!0,loading:!0})),n}return Object(c.a)(a,[{key:"CenterModal",value:function(e){return o.a.createElement(p.a,Object.assign({},e,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),o.a.createElement(p.a.Header,{closeButton:!0},o.a.createElement(p.a.Title,{id:"contained-modal-title-vcenter"},e.title)),o.a.createElement(p.a.Body,null,e.children),o.a.createElement(p.a.Footer,null,o.a.createElement(f.a,{onClick:e.onHide},"Close")))}},{key:"setModalShow",value:function(e){!1===e?(this.state.showOptions,this.setState({modalName:"",about:!1,import:!1,legacy:!1,showOptions:!1,modal:!1,showdoc:!1,showmotif:!1,showgenerate:!1})):this.setState({modal:!0})}},{key:"linkModal",value:function(){console.log("link1"),this.setState({modalName:o.a.createElement("h1",null,"Generate a sharable link"),modal:!0,showgenerate:!0})}},{key:"importJSON",value:function(){console.log("import1"),this.setState({modal:!0,modalName:"Import",import:!0})}},{key:"aboutModal",value:function(){console.log("about1"),this.setState({modalName:o.a.createElement("h1",null,"About"),modal:!0,about:!0})}},{key:"optionsModal",value:function(){console.log("options1"),this.setState({modalName:o.a.createElement("h1",null,"Options"),modal:!0,showOptions:!0})}},{key:"showDoc",value:function(e){console.log("showdoc: "+e);for(var t=[],a=[],n=0,r=Object.keys(this.state.lda.phi[e]);n<r.length;n++){var s=r[n];t.push(s)}for(var l=0,c=Object.keys(this.state.lda.phi[e]);l<c.length;l++)for(var i=c[l],u=0,h=Object.keys(this.state.lda.phi[e][i]);u<h.length;u++){var m=h[u];a.includes(m)||a.push(m)}this.setState({modal:!0,modalName:o.a.createElement("h1",null,"Docs page of ",e),showdoc:!0,showmotif:!1,features:t,motifs:a,dockey:e})}},{key:"showMotif",value:function(e){console.log("showmotif: "+e);for(var t=[],a=[],n=0,r=Object.keys(this.state.lda.beta[e]);n<r.length;n++){var s=r[n];t.push(s)}for(var l=0,c=Object.keys(this.state.lda.theta);l<c.length;l++)for(var i=c[l],u=0,h=Object.keys(this.state.lda.theta[i]);u<h.length;u++){h[u]===e&&(a.includes(i)||a.push(i))}this.setState({modal:!0,modalName:o.a.createElement("h1",null,"Motif page of ",e),showmotif:!0,showdoc:!1,features:t,motifs:[],docs:a,motifkey:e})}},{key:"exportJSON",value:function(){console.log("export1");var e=document.createElement("A");e.href=URL.createObjectURL(new Blob([JSON.stringify(this.state.lda)])),e.download="exportedLDA.json",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},{key:"example",value:function(e){1===e?this.linkToState("../example/"):this.linkToState("../example2/")}},{key:"linkToState",value:function(e){var t=this;this.setState({loading:!0}),this.importJSON(),fetch(e,{mode:"no-cors"}).then((function(e){return e.text()})).then((function(e){for(var a=JSON.parse(e),n={docs:[],motifs:[],thresholds:{overlap:0,probability:0,feature_probability:0}},o=0,r=Object.keys(a.doc_metadata[Object.keys(a.doc_metadata)[0]]);o<r.length;o++){var s=r[o];n.docs[s]=!0}for(var l=0,c=Object.keys(a.topic_metadata[Object.keys(a.topic_metadata)[0]]);l<c.length;l++){var i=c[l];n.motifs[i]=!0}t.setState({lda:a,options:n,imported:!0,bydocs:!0,loading:!1}),t.setModalShow(!1)})).catch((function(e){t.setState({loading:!1}),t.setModalShow(!1),console.error(e)}))}},{key:"discardLDA",value:function(){console.log("discard"),this.setState({bymotifs:!1,bydocs:!1,imported:!1,lda:""})}},{key:"fileJSON",value:function(e){var t=this,a=e.target.files[0],n=new FileReader;n.onload=function(e){for(var a=JSON.parse(e.target.result),n={docs:[],motifs:[],thresholds:{overlap:0,probability:0,feature_probability:0}},o=0,r=Object.keys(a.doc_metadata[Object.keys(a.doc_metadata)[0]]);o<r.length;o++){var s=r[o];n.docs[s]=!0}for(var l=0,c=Object.keys(a.topic_metadata[Object.keys(a.topic_metadata)[0]]);l<c.length;l++){var i=c[l];n.motifs[i]=!0}t.setState({lda:a,options:n,imported:!0,bydocs:!0,bymotifs:!1,loading:!1}),t.setModalShow(!1)},n.readAsText(a)}},{key:"byToggle",value:function(e){this.setState({bydocs:e,bymotifs:!e})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"MS2LDAviz2"},o.a.createElement(h.a,{fixed:"top",bg:"light",expand:"lg"},o.a.createElement(h.a.Brand,{href:"#home"},"MS2LDAviz2"),o.a.createElement(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),o.a.createElement(h.a.Collapse,{id:"basic-navbar-nav"},o.a.createElement(d.a,{className:"mr-auto"},this.state.imported?o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a.Link,{onClick:function(){return e.exportJSON()}},"Export"),o.a.createElement(m.a,{title:"Explore LDA",id:"basic-nav-dropdown"},o.a.createElement(m.a.Item,{onClick:function(){return e.byToggle(!0)}},"By Docs"),o.a.createElement(m.a.Item,{onClick:function(){return e.byToggle(!1)}},"By Mass2Motifs"),o.a.createElement(m.a.Divider,null)),o.a.createElement(d.a.Link,{onClick:function(){return e.discardLDA()}},"Discard"),o.a.createElement(d.a.Link,{onClick:function(){return e.optionsModal()}},"Options")):o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a.Link,{onClick:function(){return e.importJSON()}},"Import"),o.a.createElement(d.a.Link,{target:"_blank",href:"../legacy/"},"Legacy"))),o.a.createElement(d.a.Link,{onClick:function(){return e.linkModal()}},"Share"),this.state.imported?null:o.a.createElement(d.a.Link,{onClick:function(){return e.example(1)}},"Example"),this.state.imported?null:o.a.createElement(d.a.Link,{onClick:function(){return e.example(2)}},"Example 2"),o.a.createElement(d.a.Link,{onClick:function(){return e.aboutModal()}},"About"))),this.state.imported?null:o.a.createElement(V,null),this.state.imported&&this.state.bydocs?o.a.createElement(G,{options:this.state.options,lda:this.state.lda,showDoc:function(t){return e.showDoc(t)}}):null,this.state.imported&&this.state.bymotifs?o.a.createElement(U,{options:this.state.options,lda:this.state.lda,showMotif:function(t){return e.showMotif(t)}}):null,o.a.createElement(this.CenterModal,{show:this.state.modal,onHide:function(){return e.setModalShow(!1)},title:this.state.modalName},this.state.showgenerate?o.a.createElement(y,null):null,this.state.about?o.a.createElement(v,null):null,this.state.import?o.a.createElement(g,{onChange:function(t){return e.fileJSON(t)},loading:this.state.loading}):null,this.state.showOptions?o.a.createElement(K,{options:this.state.options,optionChange:function(t){return e.optionChange(t)}}):null,this.state.showdoc?o.a.createElement(P,{lda:this.state.lda,options:this.state.options,dockey:this.state.dockey,features:this.state.features,motifs:this.state.motifs,showMotif:function(t){return e.showMotif(t)}}):null,this.state.showmotif?o.a.createElement(J,{lda:this.state.lda,options:this.state.options,motifkey:this.state.motifkey,features:this.state.features,docs:this.state.docs,showDoc:function(t){return e.showDoc(t)}}):null))}}]),a}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},23:function(e,t,a){},88:function(e,t,a){e.exports=a(103)},93:function(e,t,a){}},[[88,1,2]]]);
//# sourceMappingURL=main.c90798f1.chunk.js.map